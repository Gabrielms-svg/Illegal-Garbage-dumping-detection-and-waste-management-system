{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dump Surveillance AI - Illegal Dump Detection</title>

    <!-- Static CSS -->
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>

  <body>
    <!-- Header -->
    <header>
      <div class="container">
        <nav>
          <div class="logo">
            <div class="logo-icon"><i class="fas fa-trash-alt"></i></div>
            <div class="logo-text">Dump<span>Surveillance AI</span></div>
          </div>

          <div class="menu-toggle" id="menuToggle">
            <i class="fas fa-bars"></i>
          </div>

          <div class="nav-links" id="navLinks">
            <div class="dropdown" id="loginDropdown">
              <div class="dropdown-btn">
                Login <i class="fas fa-chevron-down"></i>
              </div>
              <div class="dropdown-content">
                <a href="{% url 'user_login' %}">User Login</a>
                <a href="{% url 'auth_login' %}"
                  >Authority (Government) Login</a
                >
              </div>
            </div>

            <a href="{% url 'user_register' %}" class="btn btn-outline"
              >Register</a
            >
          </div>
        </nav>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero" id="home">
      <div class="container">
        <h1>Intelligent Illegal Dump Detection</h1>
        <p>
          An AI-powered platform to detect illegal garbage dumping, manage waste
          responsibly, find legal disposal sites near you, and report offenses
          instantly..
        </p>
      </div>
    </section>

    <!-- Recent Offenses -->
    <section class="container">
      <div class="section-title">
        <h2>Recent Illegal Dumps</h2>
        <p>Latest reported illegal dumping activities.</p>
      </div>

      <div class="offenses-grid" id="recent-offenses">
        {% for event in events %}
        <div class="offense-card">
          {% if event.dumping_video %}
          <video controls class="offense-img" width="400">
            <source src="{{ event.dumping_video.url }}" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
          {% endif %}
          <div class="offense-details">
            <div class="offense-meta">
              <div class="offense-date">
                {{ event.timestamp|date:"M d, Y" }}
              </div>
              <div class="offense-time">{{ event.timestamp|time:"H:i A" }}</div>
            </div>
            <div class="offense-location">
              {% if event.camera %} {{ event.camera.location }} {% else %}
              Unknown {% endif %}
            </div>
            <h3 class="offense-title">Illegal Dumping Event</h3>
            <p class="offense-desc">
              Detected dumping by {{ event.actor|default:"Unknown" }}
            </p>
            <span class="status-badge status-reported">Reported</span>
          </div>
        </div>
        {% empty %}
        <p>No illegal dumping events recorded yet.</p>
        {% endfor %}

        <!-- Footer -->
        <footer id="about">
          <div class="container">
            <div class="footer-content">
              <div class="footer-about">
                <div class="footer-logo">Dump<span>Surveillance AI</span></div>
                <p>AI-powered illegal dump detection system.</p>
              </div>

              <div class="footer-links">
                <h3>Quick Links</h3>
                <ul>
                  <li><a href="home">Home</a></li>
                  <li><a href="register">Register</a></li>
                  <li><a href="user_login">User Login</a></li>
                  <li><a href="authority_login">Authority Login</a></li>
                  <li><a href="#recent-offenses">Recent Offenses</a></li>
                  <li><a href="report_dump">Report Illegal Dump</a></li>
                </ul>
              </div>

              <div class="footer-contact">
                <h3>Contact Us</h3>
                <p><i class="fas fa-envelope"></i> info@dumpsurveillance.ai</p>
                <p><i class="fas fa-phone"></i> +1 (555) 123-4567</p>
                <p>
                  <i class="fas fa-map-marker-alt"></i> 123 Eco Street, Green
                  City
                </p>
              </div>
            </div>

            <div class="copyright">
              <p>&copy; 2025 Dump Surveillance AI. All rights reserved.</p>
            </div>
          </div>
        </footer>

        <!-- JavaScript -->
        <script src="{% static 'js/main.js' %}"></script>
        <script>
          const menuToggle = document.getElementById("menuToggle");
          const navLinks = document.getElementById("navLinks");
          const loginDropdown = document.getElementById("loginDropdown");

          menuToggle.addEventListener("click", () => {
            navLinks.classList.toggle("active");
          });

          const dropdownBtn = loginDropdown.querySelector(".dropdown-btn");
          dropdownBtn.addEventListener("click", () => {
            if (window.innerWidth <= 768) {
              loginDropdown.classList.toggle("active");
            }
          });
        </script>
      </div>
    </section>
  </body>
</html>
